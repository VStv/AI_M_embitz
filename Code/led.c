//*********************************************************************************************
//                                          Led.c
//*********************************************************************************************
//
//---------------------------------------------------------------------------------------------
//                                     Include section 
//---------------------------------------------------------------------------------------------
#include "led.h"

//---------------------------------------------------------------------------------------------
//                                        Functions
//---------------------------------------------------------------------------------------------
//---------------------------------------- LED init -------------------------------------------
void LedInit(void)
{
	SetAsPpOutput(LED_Port, LED_Pin, 0);
}


//--------------------------------------- LED control -----------------------------------------
void LedCtrl(
			uint8_t state
			)
{
	static uint16_t temp2;
	
	switch(state)
	{
		case 1:
			LED_ON();
			break;
		
		case 2:
			temp2++;
			if(temp2>=150)
			{
				if(TEST_PIN(LED_Port, LED_Pin)) 
				{
					LED_OFF();
				}
				else 
				{
					LED_ON();
				}
				temp2 = 0;
			}
			break;
			
		case 3:
			temp2++;
			if(temp2<5) 
			{
				LED_ON();
			}
			else
			{
				LED_OFF();
			}
			if(temp2>=1195) 
				temp2 = 0;
			break;
			
		case 4:
			temp2++;
			if(temp2>=12)
			{
				if(TEST_PIN(LED_Port, LED_Pin)) 
				{
					LED_OFF();
				}
				else 
				{
					LED_ON();
				}
				temp2 = 0;
			}
			break;
			
		case 5:
			if(TEST_PIN(LED_Port, LED_Pin)) 
			{
				LED_OFF();
			}
			else 
			{
				LED_ON();
			}			
			break;
			
		default:
			LED_OFF();
			break;
	}
}


